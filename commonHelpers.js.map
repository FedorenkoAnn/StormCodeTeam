{"version":3,"file":"commonHelpers.js","sources":["../src/js/api.js","../src/js/modal.js","../src/js/variables.js","../src/js/functions.js","../src/js/markup.js","../src/js/bestsellers.js","../src/js/hardcover.js","../src/js/slider.js","../src/js/scroll-up.js","../src/js/scrollup-button.js"],"sourcesContent":["import axios from 'axios';\n\n//Перелік категорій книг\n\nasync function getCategoryList() {\n  const categoryList = await axios.get(\n    `https://books-backend.p.goit.global/books/category-list`\n  );\n  return categoryList;\n}\n\n//Популярні книги, що належать до усіх категорій\n\nasync function getTopBooks() {\n  const topBooks = await axios.get(\n    `https://books-backend.p.goit.global/books/top-books`\n  );\n  return topBooks;\n}\n\n// Книги окремої категорії\n\nasync function getByCategoryBooks(paramCategory) {\n  const categoryBooks = await axios.get(\n    `https://books-backend.p.goit.global/books/category?category=${paramCategory}`\n  );\n  return categoryBooks;\n}\n\n// Детальна інформація про книгу\n\nasync function getBookById(paramId) {\n\n  const idBook = await axios.get(\n    `https://books-backend.p.goit.global/books/${paramId}`\n  );\n  return idBook;\n}\n\n\nexport { getCategoryList, getTopBooks, getByCategoryBooks, getBookById };\n\n\n","import { getBookById } from './api';\nimport amazon1x from '../img/amazon@1x.png';\nimport app_books1x from '../img/app_books@1x.png';\nconst modalBodyEl = document.querySelector('.modal-body');\nconst backdrop = document.querySelector('.backdrop');\nconst modalCloseBtn = document.querySelector('.modal-close-btn');\nlet addToShoppingListBtn;\nlet shoppingList = [];\n// Використовуйте константу для ключа у локальному сховищі\nconst BOOKS_STORAGE_KEY = 'shoppingList';\nconst savedShoppingList = localStorage.getItem(BOOKS_STORAGE_KEY);\nif (savedShoppingList) {\n  shoppingList = JSON.parse(savedShoppingList);\n}\nmodalCloseBtn.addEventListener('click', closeModal);\ndocument.addEventListener('click', async event => {\n  try {\n    const hardcoverItem =\n      event.target.closest('.hardcover-item') ||\n      event.target.closest('.js-card');\n    if (hardcoverItem) {\n      const id = hardcoverItem.id;\n      const response = await getBookById(id);\n      const bookData = response.data;\n      const truncatedBookData = {\n        _id: bookData._id,\n        book_image: bookData.book_image,\n        title: bookData.title,\n        list_name: bookData.list_name,\n        description: bookData.description,\n        author: bookData.author,\n        buy_links: bookData.buy_links.slice(0, 2),\n      };\n      const markup = markupBook(truncatedBookData);\n      openModal();\n      addMarkup(modalBodyEl, markup);\n      if (addToShoppingListBtn && addToShoppingListBtn.parentNode) {\n        addToShoppingListBtn.parentNode.removeChild(addToShoppingListBtn);\n      }\n      addToShoppingListBtn = document.createElement('button');\n      addToShoppingListBtn.textContent = shoppingList.some(\n        book => book._id === id\n      )\n        ? 'Remove from Shopping List'\n        : 'Add to Shopping List';\n      addToShoppingListBtn.classList.add('add-to-shopping-list-btn');\n      addToShoppingListBtn.addEventListener('click', () => {\n        toggleShoppingList(truncatedBookData);\n      });\n      modalBodyEl.appendChild(addToShoppingListBtn);\n      // Зберігаємо інформацію про книгу в local storage\n      localStorage.setItem(BOOKS_STORAGE_KEY, JSON.stringify(shoppingList));\n    }\n  } catch (error) {\n    console.error(error);\n  }\n});\nbackdrop.addEventListener('click', event => {\n  if (event.target === backdrop) {\n    closeModal();\n  }\n});\ndocument.addEventListener('keydown', event => {\n  if (event.key === 'Escape') {\n    closeModal();\n  }\n});\nfunction openModal() {\n  backdrop.style.display = 'block';\n}\nfunction closeModal() {\n  backdrop.style.display = 'none';\n}\nfunction markupBook(book) {\n  const { book_image, list_name, title, author, description } = book;\n  return `<div class=\"image-container\">\n      <img src=\"${book_image}\" alt=\"${list_name}\" />\n    </div>\n    <div class=\"list-container\">\n      <div class=\"list-details\">\n        <h2 class=\"modal-title\">${title}</h2>\n        <p class=\"list-name\">${author}</p>\n      </div>\n        <p class=\"list-descr\">${description}</p>\n        <div class=\"list-links\">\n            <img class=\"icon-amazon\" src=\"${amazon1x}\" alt=\"amazon\" />\n            <img class=\"icon-apple\" src=\"${app_books1x}\" alt=\"app_books\" />\n        </div>\n      </div>\n    </div>\n     `;\n}\nfunction addMarkup(el, markup) {\n  el.innerHTML = markup;\n}\nfunction toggleShoppingList(book) {\n  if (!book || !book._id) {\n    console.error('Invalid book:', book);\n    return;\n  }\n  const index = shoppingList.findIndex(item => item._id === book._id);\n  if (index === -1) {\n    shoppingList.push(book);\n  } else {\n    shoppingList.splice(index, 1);\n  }\n  localStorage.setItem(BOOKS_STORAGE_KEY, JSON.stringify(shoppingList));\n  if (addToShoppingListBtn) {\n    addToShoppingListBtn.textContent = shoppingList.some(\n      item => item._id === book._id\n    )\n      ? 'Remove from Shopping List'\n      : 'Add to Shopping List';\n  }\n}\n","export const viewport = window.visualViewport.width;\nexport const booksList = document.querySelector(\".js-bookslist\");\nexport const topBooks = document.querySelector(\".js-all\");\n","// Best Sellers Books\nimport {viewport} from \"./variables.js\";\n\nexport const bookCount = () => {\n  if(viewport < 768){\n    return 1;\n  }else\n  if(viewport >= 768 && viewport < 1440 ){\n    return 3;\n  }else\n  if(viewport > 1440){\n    return 5;\n  }\n}","// Best Sellers Books\n\nimport {bookCount} from \"./functions.js\";\nexport const createGalleryTopBooks = (arr) => {\n  return `<div/>\n    <h1 class=\"books_galerry-title\">Best Sellers <span class=\"books_galerry-title-subject\">Books</span></h1>\n      ${arr.map(item => {\n        const markup = `\n          <h2 class=\"books_card-heading js-heading\">${item.list_name}</h2>\n          <ul class=\"book_card-list\" >\n              ${item.books.slice(0, bookCount()).map(({ _id, book_image, title, author }) => {\n                return `<li class=\"book_card-item js-card\" id=${_id}>\n                         <div class=\"overlay-wrapper\">\n                           <img\n                             class=\"book_card_photo\"\n                             src=${book_image}\n                             alt= book cover photo ${title}\n                           />\n                          </div>\n                          <h3 class=\"book_card-title\">${title}</h3>\n                          <h4 class=\"book_card_author\">${author}</h4>\n                        </li>`\n              }).join('')\n            }\n          </ul>\n        <div class=\"btn_more\">\n      <button class=\"btn_see-more\" data-category=\"${item.list_name}\">See more</button>\n    </div>`\n    return markup\n    }).join('')\n    }\n  </div>\n`\n}","import { getTopBooks } from \"./api.js\"\nimport { createGalleryTopBooks } from \"./markup.js\"\nimport { booksList, topBooks, viewport } from \"./variables.js\"\n\ngetRandomTopBooks();\n\n// Обробка запиту на сервер та рендер розмітки\n\nasync function getRandomTopBooks() {\n  try {\n    const response = await getTopBooks();\n    const data = response.data;\n    const arrTopBooks = [];\n    let i = 0;\n    for (const el of data) {\n      if (arrTopBooks.length === 4) {\n        break;\n      }\n      i = Math.round(Math.random() * data.length);\n      if (!arrTopBooks.includes(data[i])) {\n        arrTopBooks.push(data[i])\n      }\n    }\n    booksList.innerHTML = createGalleryTopBooks(arrTopBooks);\n  } catch (err) {\n    console.log(err);\n  }\n}\n\n// Перезавантаження сторінки при зміні розміру в'юпорту\n\nwindow.onresize = function (event) {\n  const cur_viewport = document.documentElement.clientWidth;\n  if (cur_viewport < 768 && viewport >= 768) {\n    location.reload()\n  } else if (cur_viewport < 1440 && viewport >= 1440) {\n    location.reload()\n  } else if (cur_viewport >= 768 && viewport < 768) {\n    location.reload()\n  } else if(cur_viewport >= 1440 && viewport < 1440) {\n    location.reload()\n  }\n};\n\n// Завантаження домашньої сторінки на кліку на категорію \"All categories\"\n\ntopBooks.addEventListener(\"click\", onTopBooks)\nfunction onTopBooks(evt) {\n  getRandomTopBooks();\n}","import { getByCategoryBooks } from './api.js';\n\nconst allCategoriesList = document.querySelector('.js-list');\nconst categoriesItem = document.querySelectorAll('.js-category');\nconst hardcoverBooksList = document.querySelector('.books-list');\n\nlet booksPerPage;\n\nfunction renderBooks(category, booksByCategory) {\n    const markup = createHardcoverMarkup(category, booksByCategory.slice(0, booksPerPage));\n    hardcoverBooksList.innerHTML = markup;\n}\n\nfunction createHardcoverMarkup(category, booksByCategory) {\n    const categoryTitle = `<h2 class=\"hardcover-category-title\">${category.replace(/(\\w+)\\s*$/, '<span class=\"book-categories-span\">$1</span>')}</h2>`;\n    const booksByCategoryMarkup = booksByCategory.map(({ _id, book_image, title, author }) =>\n        `<li class=\"hardcover-item\" id=${_id}>         \n            <div class=\"hardcover-container\">\n                <div class=\"hardcover-wrapper\">\n                <div class =\"overlay-wrapper\">\n                    <img class=\"hardcover-image\" src=\"${book_image}\"/>\n                    </div>\n                    <div class=\"hardcover-text-container\">\n                        <h2 class=\"hardcover-title\">${title}</h2>\n                        <p class=\"hardcover-text\">${author}</p>\n                    </div>\n                </div>\n            </div>\n        </li>`\n    ).join('');\n    return categoryTitle + '<ul class=\"hardcover-list\">' + booksByCategoryMarkup + '</ul>';\n}\n\nasync function handleCategoryClick(event) {\n    try {\n        if (Array.from(categoriesItem).includes(event.target)) {\n            const category = event.target.textContent.trim(); \n            const booksByCategory = await fetchBooksByCategory(category);\n            renderBooks(category, booksByCategory);\n        }\n    } catch (error) {\n        console.error(error);\n    }\n}\n\nasync function handleSeeMoreClick(event) {\n    if (event.target.classList.contains('btn_see-more')) {\n        try {\n            const category = event.target.dataset.category.trim(); \n            const booksByCategory = await fetchBooksByCategory(category);\n            renderBooks(category, booksByCategory);\n        } catch (error) {\n            console.error(error);\n        }\n    }\n}\n\nasync function fetchBooksByCategory(category) {\n    const response = await getByCategoryBooks(category);\n    return response.data.map(({ _id, book_image, title, author }) => ({\n        _id,\n        book_image,\n        title,\n        author\n    }));\n}\n\nwindow.addEventListener('resize', () => {\n    if (window.innerWidth <= 768) {\n        booksPerPage = 7;\n    } else {\n        booksPerPage = 15;\n    }\n});\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    if (window.innerWidth <= 768) {\n        booksPerPage = 7;\n    } else {\n        booksPerPage = 15;\n    }\n\n    const bookCardListSeeMore = document.querySelector('.js-bookslist');\n    bookCardListSeeMore.addEventListener('click', handleSeeMoreClick);\n\n    allCategoriesList.addEventListener('click', handleCategoryClick);\n});","// import Swiper from 'swiper/bundle';\n\n// import 'swiper/css/bundle';\n\n// const swiper = new Swiper('.swiper-scrollbar', {\n//   scrollbar: {\n//     el: '.swiper-scrollbar',\n//     draggable: true,\n//   },\n// });\n\n// const newSwiper = new Swiper('.swiper-container', {\n//   slidesPerView: 6,\n//   spaceBetween: 20,\n//   direction: 'vertical',\n//   speed: 400,\n//   navigation: {\n//     nextEl: '.swiper-button-next',\n//     prevEl: '.swiper-button-prev',\n//   },\n// });\n\n// function handlerClick() {\n//   arrowDown.classList.toggle('visually-hidden');\n//   arrowUp.classList.toggle('visually-hidden');\n\n//   supportList.scroll({\n//     top: 170,\n//     left: 0,\n//     behavior: 'smooth',\n//   });\n\n//   if (arrowUp.classList.contains('visually-hidden')) {\n//     supportList.scroll({\n//       top: -170,\n//       left: 0,\n//       behavior: 'smooth',\n//     });\n//   }\n// }\n\n// document.addEventListener('DOMContentLoaded', function () {\n//   const list = document.querySelector('.sidebar-swiper-list');\n//   const scrollStep = 100; // Величина прокрутки\n\n//   // Функция прокрутки вверх\n//   function scrollUp() {\n//     list.scrollBy += scrollStep;\n//     updateScrollButtons();\n//   }\n\n//   // Функция прокрутки вниз\n//   function scrollDown() {\n//     list.scrollBy -= scrollStep;\n//     updateScrollButtons();\n//   }\n\n//   // Функция обновления состояния кнопок прокрутки\n//   function updateScrollButtons() {\n//     const scrollTop = list.scrollTop;\n//     const maxScrollTop = list.scrollHeight - list.clientHeight;\n\n//     // Показать/скрыть кнопку прокрутки вверх\n//     document\n//       .querySelector('.support-arrow-up')\n//       .classList.toggle('visually-hidden', scrollTop === 0);\n\n//     // Показать/скрыть кнопку прокрутки вниз\n//     document\n//       .querySelector('.support-arrow-down')\n//       .classList.toggle('visually-hidden', scrollTop >= maxScrollTop);\n//   }\n\n//   // Добавление обработчиков событий для кнопок прокрутки\n//   document\n//     .querySelector('.support-arrow-up')\n//     .addEventListener('click', scrollUp);\n//   document\n//     .querySelector('.support-arrow-down')\n//     .addEventListener('click', scrollDown);\n\n//   // Обновление состояния кнопок прокрутки при загрузке страницы\n//   updateScrollButtons();\n// });\n\nconst supportList = document.querySelector('.sidebar-swiper-list');\nconst arrowDown = document.querySelector('.support-arrow-down');\nconst arrowUp = document.querySelector('.support-arrow-up');\n\n// Добавляем обработчик события на кнопку \"вниз\"\narrowDown.addEventListener('click', function () {\n  // Прокручиваем вниз\n  supportList.scrollBy({\n    top: 170,\n    behavior: 'smooth',\n  });\n\n  // Скрываем кнопку \"вниз\" и показываем кнопку \"вверх\"\n  arrowDown.classList.add('visually-hidden');\n  arrowUp.classList.remove('visually-hidden');\n});\n\n// Добавляем обработчик события на кнопку \"вверх\"\narrowUp.addEventListener('click', function () {\n  // Прокручиваем вверх\n  supportList.scrollBy({\n    top: -170,\n    behavior: 'smooth',\n  });\n\n  // Скрываем кнопку \"вверх\" и показываем кнопку \"вниз\"\n  arrowUp.classList.add('visually-hidden');\n  arrowDown.classList.remove('visually-hidden');\n});\n\n//Получаем список категорий\nconst categoryList = document.querySelector('.js-list');\n//Добавляем класс для стилизации прокрутки\ncategoryList.classList.add('scrollable');\n\n// const categoryList = document.querySelector('.js-list');\n// Проверяем, нужна ли прокрутка\n// if (categoryList.scrollHeight > categoryList.clientHeight) {\n//   categoryList.parentElement.style.overflowY = 'scroll';\n// }\n","const goTopBtn = document.querySelector('.back-to-top');\n\nwindow.addEventListener('scroll', trackScroll);\ngoTopBtn.addEventListener('click', goTop);\n\nfunction trackScroll() {\n  const scrolled = window.pageYOffset;\n  const coords = document.documentElement.clientHeight;\n\n  if (scrolled > coords) {\n    goTopBtn.classList.add('back-to-top--show');\n  } else {\n    goTopBtn.classList.remove('back-to-top--show');\n  }\n}\n\nfunction goTop() {\n  if (window.pageYOffset > 0) {\n    window.scrollBy(0, -25);\n    setTimeout(goTop, 0);\n  }\n}\n","import throttle from 'lodash.throttle';\n\nconst scrollUpBtnEl = document.querySelector('.scroll-up');\nscrollUpBtnEl.addEventListener('click', onScrollUpClick);\n\nfunction onScrollUpClick() {\n  window.scrollTo({\n    top: 0,\n    left: 0,\n    behavior: 'smooth',\n  });\n}\nwindow.addEventListener('scroll', throttle(showScrollUpButton, 1000));\n\nfunction showScrollUpButton(event) {\n  const scrollY = window.scrollY || document.documentElement.scrollTop;\n  scrollY > 300 ? showScrollUpBtn() : hideScrollUpBtn();\n}\n\nfunction hideScrollUpBtn() {\n  scrollUpBtnEl.classList.add('is-hidden');\n}\n\nfunction showScrollUpBtn() {\n  scrollUpBtnEl.classList.remove('is-hidden');\n}\n"],"names":["getTopBooks","axios","getByCategoryBooks","paramCategory","getBookById","paramId","modalBodyEl","backdrop","modalCloseBtn","addToShoppingListBtn","shoppingList","BOOKS_STORAGE_KEY","savedShoppingList","closeModal","event","hardcoverItem","id","bookData","truncatedBookData","markup","markupBook","openModal","addMarkup","book","toggleShoppingList","error","book_image","list_name","title","author","description","amazon1x","app_books1x","el","index","item","viewport","booksList","topBooks","bookCount","createGalleryTopBooks","arr","_id","getRandomTopBooks","data","arrTopBooks","i","err","cur_viewport","onTopBooks","evt","allCategoriesList","categoriesItem","hardcoverBooksList","booksPerPage","renderBooks","category","booksByCategory","createHardcoverMarkup","categoryTitle","booksByCategoryMarkup","handleCategoryClick","fetchBooksByCategory","handleSeeMoreClick","supportList","arrowDown","arrowUp","categoryList","goTopBtn","trackScroll","goTop","scrolled","coords","scrollUpBtnEl","onScrollUpClick","throttle","showScrollUpButton","showScrollUpBtn","hideScrollUpBtn"],"mappings":"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"}